SubDir TOP WebKit ;

local defines = [ FDefines BUILDING_HAIKU__=1 ] ;

# To turn off debugging symbols export NDEBUG=1 in the environment
SubDirC++Flags $(defines) -Wno-c++0x-compat ;
SubDirCcFlags $(defines) -Wno-c++0x-compat ;

SubDirSysHdrs $(TOP) ;
SubDirSysHdrs $(TOP) JavaScriptCore ;
SubDirSysHdrs $(TOP) JavaScriptCore ForwardingHeaders ;
SubDirSysHdrs $(TOP) WebCore ;
#SubDirSysHdrs $(TOP) WebCore dom ; # for WebCore/dom/WebKitNamedFlow.h
SubDirSysHdrs $(TOP) WebCore platform text ;
SubDirSysHdrs $(TOP) WTF ;

SubDirHdrs $(TOP) WebCore accessibility ;
SubDirHdrs $(TOP) WebCore bindings ;
#SubDirHdrs $(TOP) WebCore bindings cpp ;
SubDirHdrs $(TOP) WebCore bindings generic ;
SubDirHdrs $(TOP) WebCore bindings js ;
SubDirHdrs $(TOP) WebCore bridge ;
SubDirHdrs $(TOP) WebCore bridge c ;
SubDirHdrs $(TOP) WebCore bridge jsc ;
SubDirHdrs $(TOP) WebCore css ;
SubDirHdrs $(TOP) WebCore DerivedSources WebCore ;
SubDirHdrs $(TOP) WebCore dom ;
SubDirHdrs $(TOP) WebCore editing ;
SubDirHdrs $(TOP) WebCore fileapi ;
SubDirHdrs $(TOP) WebCore history ;
SubDirHdrs $(TOP) WebCore html ;
SubDirHdrs $(TOP) WebCore html canvas ;
SubDirHdrs $(TOP) WebCore html parser ;
SubDirHdrs $(TOP) WebCore html shadow ;
SubDirHdrs $(TOP) WebCore inspector ;
SubDirHdrs $(TOP) WebCore loader ;
SubDirHdrs $(TOP) WebCore loader appcache ;
SubDirHdrs $(TOP) WebCore loader archive ;
SubDirHdrs $(TOP) WebCore loader cache ;
SubDirHdrs $(TOP) WebCore loader icon ;
SubDirHdrs $(TOP) WebCore notifications ;
SubDirHdrs $(TOP) WebCore Modules filesystem ;
SubDirHdrs $(TOP) WebCore Modules geolocation ;
SubDirHdrs $(TOP) WebCore Modules indexeddb ;
SubDirHdrs $(TOP) WebCore Modules webdatabase ;
SubDirHdrs $(TOP) WebCore Modules websockets ;
SubDirHdrs $(TOP) WebCore page ;
SubDirHdrs $(TOP) WebCore page animation ;
SubDirHdrs $(TOP) WebCore page scrolling ;
SubDirHdrs $(TOP) WebCore platform ;
SubDirHdrs $(TOP) WebCore platform animation ;
SubDirHdrs $(TOP) WebCore platform graphics ;
SubDirHdrs $(TOP) WebCore platform graphics filters ;
SubDirHdrs $(TOP) WebCore platform graphics haiku ;
SubDirHdrs $(TOP) WebCore platform graphics transforms ;
SubDirHdrs $(TOP) WebCore platform haiku ;
SubDirHdrs $(TOP) WebCore platform image-decoders ;
SubDirHdrs $(TOP) WebCore platform image-decoders bmp ;
SubDirHdrs $(TOP) WebCore platform image-decoders gif ;
SubDirHdrs $(TOP) WebCore platform image-decoders ico ;
SubDirHdrs $(TOP) WebCore platform image-decoders jpeg ;
SubDirHdrs $(TOP) WebCore platform image-decoders png ;
SubDirHdrs $(TOP) WebCore platform mock ;
SubDirHdrs $(TOP) WebCore platform network ;
SubDirHdrs $(TOP) WebCore platform network curl ;
SubDirHdrs $(TOP) WebCore platform sql ;
SubDirHdrs $(TOP) WebCore platform text ;
SubDirHdrs $(TOP) WebCore platform text transcoder ;
SubDirHdrs $(TOP) WebCore plugins ;
SubDirHdrs $(TOP) WebCore rendering ;
SubDirHdrs $(TOP) WebCore rendering style ;
SubDirHdrs $(TOP) WebCore rendering svg ;
SubDirHdrs $(TOP) WebCore storage ;
SubDirHdrs $(TOP) WebCore svg ;
SubDirHdrs $(TOP) WebCore svg graphics ;
SubDirHdrs $(TOP) WebCore workers ;
SubDirHdrs $(TOP) WebCore xml ;
SubDirHdrs $(TOP) WebCore xml parser ;

SubDirHdrs $(TOP) WTF wtf ;
SubDirHdrs $(TOP) WTF wtf text ; # for WebCore/platform/haiku/ClipboardHaiku.cpp

# public JavaScriptCore headers
SubDirHdrs $(TOP) JavaScriptCore API ;
SubDirHdrs $(TOP) JavaScriptCore assembler ;
SubDirHdrs $(TOP) JavaScriptCore bytecode ;
SubDirHdrs $(TOP) JavaScriptCore heap ;
SubDirHdrs $(TOP) JavaScriptCore interpreter ;
SubDirHdrs $(TOP) JavaScriptCore jit ;
SubDirHdrs $(TOP) JavaScriptCore interpreter ;
SubDirHdrs $(TOP) JavaScriptCore llint ;
SubDirHdrs $(TOP) JavaScriptCore parser ;
SubDirHdrs $(TOP) JavaScriptCore profiler ;
SubDirHdrs $(TOP) JavaScriptCore runtime ;

#-----------------------------------------------------------------------------
# WebKit API
#-----------------------------------------------------------------------------
SEARCH_SOURCE += [ FDirName $(TOP) WebKit haiku API ] ;
SEARCH_SOURCE += [ FDirName $(TOP) WebKit haiku WebCoreSupport ] ;

SharedLibrary libwebkit.so :
	# WebCoreSupport
	ChromeClientHaiku.cpp
	ContextMenuClientHaiku.cpp
	CookieJarClientHaiku.cpp
	DragClientHaiku.cpp
	EditorClientHaiku.cpp
	FrameLoaderClientHaiku.cpp
	InspectorClientHaiku.cpp
	# API
	NetworkCookie.cpp
	NetworkCookieJar.cpp
	WebDownload.cpp
	WebDownloadPrivate.cpp
	WebFrame.cpp
	WebPage.cpp
	WebSettings.cpp
	WebSettingsPrivate.cpp
	WebView.cpp
	WebWindow.cpp

	:
	libjavascriptcore.so libwebcore.so libwtf.so
	# Other required libraries
	icuuc stdc++
	# Haiku libraries
	be translation tracker
;


#-----------------------------------------------------------------------------
# HaikuLauncher
#-----------------------------------------------------------------------------
SEARCH_SOURCE += [ FDirName $(TOP) WebKit haiku HaikuLauncher ] ;

Application HaikuLauncher :
	LauncherApp.cpp
	LauncherWindow.cpp

	:
	libjavascriptcore.so libwebcore.so libwebkit.so libwtf.so
	# Other required libraries
	curl icuuc icudata png sqlite3 xml2 z
	# Haiku libraries
	be bsd network stdc++ translation
	:
	Launcher.rdef
;


#-----------------------------------------------------------------------------
# WebPositive
#-----------------------------------------------------------------------------
SEARCH_SOURCE += [ FDirName $(TOP) WebKit haiku WebPositive ] ;
SEARCH_SOURCE += [ FDirName $(TOP) WebKit haiku WebPositive autocompletion ] ;
SEARCH_SOURCE += [ FDirName $(TOP) WebKit haiku WebPositive support ] ;
SEARCH_SOURCE += [ FDirName $(TOP) WebKit haiku WebPositive tabview ] ;

# SVN revision
#local svnRevisionFile = [ FGristFiles svn_revision ] ;
#MakeLocate $(svnRevisionFile) : $(LOCATE_TARGET) ;
#CreateSVNRevisionFile $(svnRevisionFile) ;


Application WebPositive :
	# autocompletion
	AutoCompleter.cpp
	AutoCompleterDefaultImpl.cpp
	TextViewCompleter.cpp
	# support
	BaseURL.cpp
    BitmapButton.cpp
    DateTime.cpp
    FontSelectionView.cpp
    IconButton.cpp
    SettingsMessage.cpp
    StringForSize.cpp
    # tabview
    TabContainerView.cpp
    TabManager.cpp
    TabView.cpp
	# WebPositive
    AuthenticationPanel.cpp
	BrowserApp.cpp
	BrowserWindow.cpp
    BrowsingHistory.cpp
    CredentialsStorage.cpp
    DownloadProgressView.cpp
    DownloadWindow.cpp
    SettingsKeys.cpp
	SettingsWindow.cpp
	svn_revision.cpp
	URLInputGroup.cpp

	:
	libjavascriptcore.so libwebcore.so libwebkit.so libwtf.so
	# Other required libraries
	curl icuuc icudata png sqlite3 xml2 z
	# Haiku libraries
	be bsd localestub network stdc++ tracker translation
	:
	WebPositive.rdef
;
