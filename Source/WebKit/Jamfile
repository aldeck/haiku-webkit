SubDir TOP Source WebKit ;

local defines = [ FDefines BUILDING_HAIKU__=1 ] ;

# To turn off debugging symbols export NDEBUG=1 in the environment
SubDirC++Flags $(defines) -Wno-c++0x-compat ;
SubDirCcFlags $(defines) -Wno-c++0x-compat ;

SubDirSysHdrs $(TOP) Source ;
SubDirSysHdrs $(TOP) Source JavaScriptCore ;
SubDirSysHdrs $(TOP) Source JavaScriptCore ForwardingHeaders ;
SubDirSysHdrs $(TOP) Source WebCore ;
#SubDirSysHdrs $(TOP) Source WebCore dom ; # for WebCore/dom/WebKitNamedFlow.h
SubDirSysHdrs $(TOP) Source WebCore platform text ;
SubDirSysHdrs $(TOP) Source WTF ;

SubDirHdrs $(TOP) Source WebCore accessibility ;
SubDirHdrs $(TOP) Source WebCore bindings ;
#SubDirHdrs $(TOP) Source WebCore bindings cpp ;
SubDirHdrs $(TOP) Source WebCore bindings generic ;
SubDirHdrs $(TOP) Source WebCore bindings js ;
SubDirHdrs $(TOP) Source WebCore bridge ;
SubDirHdrs $(TOP) Source WebCore bridge c ;
SubDirHdrs $(TOP) Source WebCore bridge jsc ;
SubDirHdrs $(TOP) Source WebCore css ;
SubDirHdrs $(TOP) Source WebCore DerivedSources WebCore ;
SubDirHdrs $(TOP) Source WebCore dom ;
SubDirHdrs $(TOP) Source WebCore editing ;
SubDirHdrs $(TOP) Source WebCore fileapi ;
SubDirHdrs $(TOP) Source WebCore history ;
SubDirHdrs $(TOP) Source WebCore html ;
SubDirHdrs $(TOP) Source WebCore html canvas ;
SubDirHdrs $(TOP) Source WebCore html parser ;
SubDirHdrs $(TOP) Source WebCore html shadow ;
SubDirHdrs $(TOP) Source WebCore inspector ;
SubDirHdrs $(TOP) Source WebCore loader ;
SubDirHdrs $(TOP) Source WebCore loader appcache ;
SubDirHdrs $(TOP) Source WebCore loader archive ;
SubDirHdrs $(TOP) Source WebCore loader cache ;
SubDirHdrs $(TOP) Source WebCore loader icon ;
SubDirHdrs $(TOP) Source WebCore notifications ;
SubDirHdrs $(TOP) Source WebCore Modules filesystem ;
SubDirHdrs $(TOP) Source WebCore Modules geolocation ;
SubDirHdrs $(TOP) Source WebCore Modules indexeddb ;
SubDirHdrs $(TOP) Source WebCore Modules webdatabase ;
SubDirHdrs $(TOP) Source WebCore Modules websockets ;
SubDirHdrs $(TOP) Source WebCore page ;
SubDirHdrs $(TOP) Source WebCore page animation ;
SubDirHdrs $(TOP) Source WebCore page scrolling ;
SubDirHdrs $(TOP) Source WebCore platform ;
SubDirHdrs $(TOP) Source WebCore platform animation ;
SubDirHdrs $(TOP) Source WebCore platform graphics ;
SubDirHdrs $(TOP) Source WebCore platform graphics filters ;
SubDirHdrs $(TOP) Source WebCore platform graphics haiku ;
SubDirHdrs $(TOP) Source WebCore platform graphics transforms ;
SubDirHdrs $(TOP) Source WebCore platform haiku ;
SubDirHdrs $(TOP) Source WebCore platform image-decoders ;
SubDirHdrs $(TOP) Source WebCore platform image-decoders bmp ;
SubDirHdrs $(TOP) Source WebCore platform image-decoders gif ;
SubDirHdrs $(TOP) Source WebCore platform image-decoders ico ;
SubDirHdrs $(TOP) Source WebCore platform image-decoders jpeg ;
SubDirHdrs $(TOP) Source WebCore platform image-decoders png ;
SubDirHdrs $(TOP) Source WebCore platform mock ;
SubDirHdrs $(TOP) Source WebCore platform network ;
SubDirHdrs $(TOP) Source WebCore platform network curl ;
SubDirHdrs $(TOP) Source WebCore platform sql ;
SubDirHdrs $(TOP) Source WebCore platform text ;
SubDirHdrs $(TOP) Source WebCore platform text transcoder ;
SubDirHdrs $(TOP) Source WebCore plugins ;
SubDirHdrs $(TOP) Source WebCore rendering ;
SubDirHdrs $(TOP) Source WebCore rendering style ;
SubDirHdrs $(TOP) Source WebCore rendering svg ;
SubDirHdrs $(TOP) Source WebCore storage ;
SubDirHdrs $(TOP) Source WebCore svg ;
SubDirHdrs $(TOP) Source WebCore svg graphics ;
SubDirHdrs $(TOP) Source WebCore workers ;
SubDirHdrs $(TOP) Source WebCore xml ;
SubDirHdrs $(TOP) Source WebCore xml parser ;

SubDirHdrs $(TOP) Source WTF wtf ;
SubDirHdrs $(TOP) Source WTF wtf text ; # for WebCore/platform/haiku/ClipboardHaiku.cpp

# public JavaScriptCore headers
SubDirHdrs $(TOP) Source JavaScriptCore API ;
SubDirHdrs $(TOP) Source JavaScriptCore assembler ;
SubDirHdrs $(TOP) Source JavaScriptCore bytecode ;
SubDirHdrs $(TOP) Source JavaScriptCore heap ;
SubDirHdrs $(TOP) Source JavaScriptCore interpreter ;
SubDirHdrs $(TOP) Source JavaScriptCore jit ;
SubDirHdrs $(TOP) Source JavaScriptCore interpreter ;
SubDirHdrs $(TOP) Source JavaScriptCore llint ;
SubDirHdrs $(TOP) Source JavaScriptCore parser ;
SubDirHdrs $(TOP) Source JavaScriptCore profiler ;
SubDirHdrs $(TOP) Source JavaScriptCore runtime ;

#-----------------------------------------------------------------------------
# WebKit API
#-----------------------------------------------------------------------------
SEARCH_SOURCE += [ FDirName $(TOP) Source WebKit haiku API ] ;
SEARCH_SOURCE += [ FDirName $(TOP) Source WebKit haiku WebCoreSupport ] ;

SharedLibrary libwebkit.so :
	# WebCoreSupport
	ChromeClientHaiku.cpp
	ContextMenuClientHaiku.cpp
	CookieJarClientHaiku.cpp
	DragClientHaiku.cpp
	EditorClientHaiku.cpp
	FrameLoaderClientHaiku.cpp
	InspectorClientHaiku.cpp
	# API
	NetworkCookie.cpp
	NetworkCookieJar.cpp
	WebDownload.cpp
	WebDownloadPrivate.cpp
	WebFrame.cpp
	WebPage.cpp
	WebSettings.cpp
	WebSettingsPrivate.cpp
	WebView.cpp
	WebWindow.cpp

	:
	libjavascriptcore.so libwebcore.so libwtf.so
	# Other required libraries
	icuuc stdc++
	# Haiku libraries
	be translation tracker
;


#-----------------------------------------------------------------------------
# HaikuLauncher
#-----------------------------------------------------------------------------
SEARCH_SOURCE += [ FDirName $(TOP) Source WebKit haiku HaikuLauncher ] ;

Application HaikuLauncher :
	LauncherApp.cpp
	LauncherWindow.cpp

	:
	libjavascriptcore.so libwebcore.so libwebkit.so libwtf.so
	# Other required libraries
	curl icuuc icudata png sqlite3 xml2 z
	# Haiku libraries
	be bsd network stdc++ translation
	:
	Launcher.rdef
;


#-----------------------------------------------------------------------------
# WebPositive
#-----------------------------------------------------------------------------
SEARCH_SOURCE += [ FDirName $(TOP) Source WebKit haiku WebPositive ] ;
SEARCH_SOURCE += [ FDirName $(TOP) Source WebKit haiku WebPositive autocompletion ] ;
SEARCH_SOURCE += [ FDirName $(TOP) Source WebKit haiku WebPositive support ] ;
SEARCH_SOURCE += [ FDirName $(TOP) Source WebKit haiku WebPositive tabview ] ;

# SVN revision
#local svnRevisionFile = [ FGristFiles svn_revision ] ;
#MakeLocate $(svnRevisionFile) : $(LOCATE_TARGET) ;
#CreateSVNRevisionFile $(svnRevisionFile) ;


Application WebPositive :
	# autocompletion
	AutoCompleter.cpp
	AutoCompleterDefaultImpl.cpp
	TextViewCompleter.cpp
	# support
	BaseURL.cpp
    BitmapButton.cpp
    DateTime.cpp
    FontSelectionView.cpp
    IconButton.cpp
    SettingsMessage.cpp
    StringForSize.cpp
    # tabview
    TabContainerView.cpp
    TabManager.cpp
    TabView.cpp
	# WebPositive
    AuthenticationPanel.cpp
	BrowserApp.cpp
	BrowserWindow.cpp
    BrowsingHistory.cpp
    CredentialsStorage.cpp
    DownloadProgressView.cpp
    DownloadWindow.cpp
    SettingsKeys.cpp
	SettingsWindow.cpp
	svn_revision.cpp
	URLInputGroup.cpp

	:
	libjavascriptcore.so libwebcore.so libwebkit.so libwtf.so
	# Other required libraries
	curl icuuc icudata png sqlite3 xml2 z
	# Haiku libraries
	be bsd localestub network stdc++ tracker translation
	:
	WebPositive.rdef
;
