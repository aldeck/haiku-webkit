SubDir TOP WebKit ;

local defines = [ FDefines BUILDING_HAIKU__=1
	WTF_USE_PTHREADS=1 HAVE_POSIX_MEMALIGN=1 HAVE_SYS_TIME_H=1 ENABLE_DOM_STORAGE=1
    ENABLE_SVG=1 ENABLE_SVG_ANIMATION=1 ENABLE_SVG_FONTS=1 ENABLE_SVG_FOREIGN_OBJECT=1 ENABLE_SVG_USE=1 ] ;

# To turn off debugging symbols export NDEBUG=1 in the environment
SubDirC++Flags $(defines) ;
SubDirCcFlags $(defines) ;

SubDirSysHdrs $(TOP) JavaScriptCore ;
SubDirSysHdrs $(TOP) WebCore svg ;
SubDirSysHdrs $(TOP) WebCore bindings js ;

SubDirHdrs $(TOP) ;
SubDirHdrs $(TOP) WebCore ;

SubDirHdrs $(TOP) JavaScriptCore assembler ;
SubDirHdrs $(TOP) JavaScriptCore bytecode ;
SubDirHdrs $(TOP) JavaScriptCore interpreter ;
SubDirHdrs $(TOP) JavaScriptCore jit ;
SubDirHdrs $(TOP) JavaScriptCore parser ;
SubDirHdrs $(TOP) JavaScriptCore runtime ;
SubDirHdrs $(TOP) JavaScriptCore wtf ;

SubDirHdrs $(TOP) WebCore DerivedSources WebCore ;
SubDirHdrs $(TOP) WebCore ForwardingHeaders wtf ;
SubDirHdrs $(TOP) WebCore ForwardingHeaders runtime ;
SubDirHdrs $(TOP) WebCore bindings js ;
SubDirHdrs $(TOP) WebCore bridge ;
SubDirHdrs $(TOP) WebCore bridge jsc ;
SubDirHdrs $(TOP) WebCore css ;
SubDirHdrs $(TOP) WebCore dom ;
SubDirHdrs $(TOP) WebCore editing ;
SubDirHdrs $(TOP) WebCore history ;
SubDirHdrs $(TOP) WebCore html ;
SubDirHdrs $(TOP) WebCore inspector ;
SubDirHdrs $(TOP) WebCore loader ;
SubDirHdrs $(TOP) WebCore page ;
SubDirHdrs $(TOP) WebCore page animation ;
SubDirHdrs $(TOP) WebCore platform ;
SubDirHdrs $(TOP) WebCore platform animation ;
SubDirHdrs $(TOP) WebCore platform graphics ;
SubDirHdrs $(TOP) WebCore platform graphics haiku ;
SubDirHdrs $(TOP) WebCore platform graphics transforms ;
SubDirHdrs $(TOP) WebCore platform network ;
SubDirHdrs $(TOP) WebCore platform network curl ;
SubDirHdrs $(TOP) WebCore platform text ;
SubDirHdrs $(TOP) WebCore plugins ;
SubDirHdrs $(TOP) WebCore rendering ;
SubDirHdrs $(TOP) WebCore rendering style ;
SubDirHdrs $(TOP) WebCore svg ;
SubDirHdrs $(TOP) WebCore svg animation ;
SubDirHdrs $(TOP) WebCore svg graphics ;


#-----------------------------------------------------------------------------
# WebKit API
#-----------------------------------------------------------------------------
SEARCH_SOURCE += [ FDirName $(TOP) WebKit haiku API ] ;
SEARCH_SOURCE += [ FDirName $(TOP) WebKit haiku WebCoreSupport ] ;

SharedLibrary libwebkit.so :
	ChromeClientHaiku.cpp
	ContextMenuClientHaiku.cpp
	DragClientHaiku.cpp
	EditorClientHaiku.cpp
	FrameLoaderClientHaiku.cpp
	InspectorClientHaiku.cpp
	WebDownload.cpp
	WebDownloadPrivate.cpp
	WebFrame.cpp
	WebPage.cpp
	WebView.cpp
	WebWindow.cpp

	:
	libjavascriptcore.so libwebcore.so
	# Other required libraries
	icu-common stdc++
	# Haiku libraries
	be translation tracker
;


#-----------------------------------------------------------------------------
# HaikuLauncher
#-----------------------------------------------------------------------------
SEARCH_SOURCE += [ FDirName $(TOP) WebKit haiku HaikuLauncher ] ;

Application HaikuLauncher :
	LauncherApp.cpp
	LauncherWindow.cpp

	:
	libjavascriptcore.so libwebcore.so libwebkit.so
	# Other required libraries
	curl icu-common icu-data png sqlite3 xml2 z
	# Haiku libraries
	be bsd network root stdc++ translation
	:
	Launcher.rdef
;


#-----------------------------------------------------------------------------
# WebPositive
#-----------------------------------------------------------------------------
SEARCH_SOURCE += [ FDirName $(TOP) WebKit haiku WebPositive ] ;

Application WebPositive :
    AuthenticationPanel.cpp
    BrowsingHistory.cpp
    DateTime.cpp
    DownloadWindow.cpp
    IconButton.cpp
	BrowserApp.cpp
	BrowserWindow.cpp
	WebTabView.cpp

	:
	libjavascriptcore.so libwebcore.so libwebkit.so
	# Other required libraries
	curl icu-common icu-data png sqlite3 xml2 z
	# Haiku libraries
	be bsd network root stdc++ translation
	:
	WebPositive.rdef
;
